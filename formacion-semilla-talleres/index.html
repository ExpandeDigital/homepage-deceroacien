<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bonus: Formaci√≥n Semilla - DE CERO A CIEN</title>
  <link rel="stylesheet" href="../assets/styles/common.css">
  <link rel="stylesheet" href="../assets/styles/mobile.css">
  <link rel="stylesheet" href="../assets/styles/formacion-semilla.css">
</head>
<body class="fs-body">
  <header class="header-component"></header>
  <script>
    // Enlaces universales: return a la URL actual
    document.addEventListener('DOMContentLoaded', function() {
      var currentUrl = encodeURIComponent(window.location.href);
      var register = document.getElementById('fs-register-link');
      var login = document.getElementById('fs-login-link');
      if (register) register.href = `../auth/register.html?return=${currentUrl}`;
      if (login) login.href = `../auth/login.html?return=${currentUrl}`;
    });
  </script>
  <main class="py-16">
    <div class="fs-container">
      <!-- Mensaje para usuarios no registrados -->
      <div id="auth-required-message" class="hidden fs-card rounded-xl p-8 text-center">
        <h1 class="text-4xl font-black mb-4">Bonus ¬∑ Formaci√≥n Semilla</h1>
        <div class="fs-highlight-box p-6 mb-6">
          <h2 class="fs-section-title">üîê Registro Requerido</h2>
          <p class="text-gray-300 mb-4">Para acceder a Formaci√≥n Semilla necesitas registrarte gratuitamente en nuestra plataforma.</p>
          <p class="text-gray-400 text-sm mb-6">Cinco talleres introductorios para emprendedores que quieren avanzar m√°s r√°pido.</p>
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a id="fs-register-link" href="#" class="fs-btn fs-btn-primary">
              Registrarme Gratis
            </a>
            <a id="fs-login-link" href="#" class="fs-btn fs-btn-secondary">
              Ya tengo cuenta
            </a>
          </div>
        </div>
      </div>

      <!-- Contenido para usuarios registrados -->
      <div id="main-content" class="hidden">
        <h1 class="text-4xl font-black">Bonus ¬∑ Formaci√≥n Semilla</h1>
        <p class="mt-3 text-gray-400">Acceso exclusivo para alumnos registrados. Cinco talleres introductorios para avanzar m√°s r√°pido.</p>

        <section class="mt-10 fs-card rounded-xl p-8 space-y-4">
          <h2 class="fs-section-title">¬øPara qui√©n es Formaci√≥n Semilla?</h2>
          <p class="text-gray-300">Formaci√≥n Semilla es para quienes est√°n sembrando las bases de su emprendimiento y necesitan claridad para pasar de la idea a la acci√≥n con pasos concretos.</p>
          <p class="text-gray-400"><strong>Es para ti si‚Ä¶</strong> est√°s validando tu problema, quieres estructurar propuestas iniciales de valor, buscas acelerar tus primeros aprendizajes y prefieres gu√≠as accionables en lugar de teor√≠a infinita.</p>
        </section>

        <section class="mt-10 grid grid-cols-1 md:grid-cols-2 gap-6">
          <a class="fs-card-interactive rounded-lg p-6 block transition-colors" href="TALLER 01 - FORMACI√ìN SEMILLA/taller-01.html">
            <h2 class="text-xl font-bold text-yellow-400">Taller 01 ‚Äì De la Idea a la Acci√≥n</h2>
            <p class="text-gray-400 mt-2">Convierte tu idea en un plan de acci√≥n concreto</p>
            <div class="mt-4 flex items-center text-sm text-gray-500">
              <span>üìä Incluye: Calculadora de Punto de Equilibrio</span>
            </div>
          </a>
          <a class="fs-card-interactive rounded-lg p-6 block transition-colors" href="TALLER 02 - FORMACI√ìN SEMILLA/taller-02.html">
            <h2 class="text-xl font-bold text-yellow-400">Taller 02 ‚Äì El Valor de tu Idea</h2>
            <p class="text-gray-400 mt-2">Dise√±a tu propuesta de valor y aprende a comprar bien</p>
            <div class="mt-4 flex items-center text-sm text-gray-500">
              <span>üéØ Incluye: Dise√±ador de Propuesta de Valor</span>
            </div>
          </a>
          <a class="fs-card-interactive rounded-lg p-6 block transition-colors" href="TALLER 03 - FORMACI√ìN SEMILLA/taller-03.html">
            <h2 class="text-xl font-bold text-yellow-400">Taller 03 ‚Äì Tu Primera Venta</h2>
            <p class="text-gray-400 mt-2">C√≥mo contar tu historia y encontrar a tus clientes</p>
            <div class="mt-4 flex items-center text-sm text-gray-500">
              <span>‚úçÔ∏è Incluye: Generador de Copy con IA</span>
            </div>
          </a>
          <a class="fs-card-interactive rounded-lg p-6 block transition-colors" href="TALLER 04 - FORMACI√ìN SEMILLA/taller-04.html">
            <h2 class="text-xl font-bold text-yellow-400">Taller 04 ‚Äì De Bombero a Arquitecto</h2>
            <p class="text-gray-400 mt-2">C√≥mo organizar tu d√≠a para crecer</p>
            <div class="mt-4 flex items-center text-sm text-gray-500">
              <span>‚ö° Incluye: Priorizador de Tareas con IA</span>
            </div>
          </a>
          <a class="fs-card-interactive rounded-lg p-6 block md:col-span-2 transition-colors" href="TALLER 05 - FORMACI√ìN SEMILLA/taller-05.html">
            <h2 class="text-xl font-bold text-yellow-400">Taller 05 ‚Äì De la Rutina a la Revoluci√≥n</h2>
            <p class="text-gray-400 mt-2">C√≥mo innovar sin ser un genio</p>
            <div class="mt-4 flex items-center text-sm text-gray-500">
              <span>üí° Incluye: Generador de Ideas con IA (M√©todo SCAMPER)</span>
            </div>
          </a>
        </section>

        <!-- Recursos adicionales -->
        <section class="mt-10 fs-card rounded-xl p-8">
          <h3 class="fs-section-title mb-4">üìö Recursos Adicionales</h3>
          
          <!-- Recurso destacado: La Bit√°cora del Fundador -->
          <div class="mb-6 bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border border-yellow-400/30 rounded-xl p-6">
            <div class="flex items-start space-x-4">
              <span class="text-4xl">üìñ</span>
              <div class="flex-1">
                <h4 class="text-xl font-bold text-yellow-400 mb-2">La Bit√°cora del Fundador</h4>
                <p class="text-gray-300 mb-3">Manual interactivo con herramientas pr√°cticas para cada etapa de tu emprendimiento. Incluye calculadoras, generadores de contenido y matrices de decisi√≥n.</p>
                <div class="flex flex-col sm:flex-row gap-3">
                  <a href="la-bitacora-del-fundador.html" class="bg-yellow-500 hover:bg-yellow-400 text-black px-4 py-2 rounded-lg font-bold transition-colors text-center">
                    üîß Abrir Bit√°cora Interactiva
                  </a>
                  <a href="libro_de_estudio.pdf" class="border border-yellow-400 hover:border-yellow-300 text-yellow-400 hover:text-yellow-300 px-4 py-2 rounded-lg font-bold transition-colors text-center" download>
                    üì• Descargar PDF Completo
                  </a>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Otros recursos -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <a href="Cuaderno de Estrategia.html" class="flex items-center space-x-3 p-4 border border-gray-600 rounded-lg fs-hover-effect transition-colors">
              <span class="text-2xl">üìã</span>
              <div>
                <h4 class="font-bold">Cuaderno de Estrategia</h4>
                <p class="text-sm text-gray-400">Plantillas y ejercicios pr√°cticos</p>
              </div>
            </a>
            <a href="Landing_Formacion_Semilla.html" class="flex items-center space-x-3 p-4 border border-gray-600 rounded-lg fs-hover-effect transition-colors">
              <span class="text-2xl">üöÄ</span>
              <div>
                <h4 class="font-bold">Informaci√≥n del Programa</h4>
                <p class="text-sm text-gray-400">Detalles completos de Formaci√≥n Semilla</p>
              </div>
            </a>
          </div>
        </section>
      </div>
    </div>
    </div>
  </main>
  <footer class="footer-component"></footer>
  <!-- Config p√∫blica y cliente de Supabase para sesiones reales -->
  <script src="../assets/js/config-secure.js"></script>
  <script src="../assets/js/supabase-client.js"></script>
  <script src="../assets/js/components.js"></script>
  <script src="../assets/js/auth.js"></script>
  <!-- entitlements.js removido - Formaci√≥n Semilla es contenido gratuito para usuarios registrados -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const authRequiredMessage = document.getElementById('auth-required-message');
      const mainContent = document.getElementById('main-content');
      
      // Limpia cualquier overlay de gating heredado (por cach√© o scripts externos)
      function removeGatingOverlays() {
        try {
          const candidates = Array.from(document.querySelectorAll('body > div'));
          candidates.forEach(el => {
            const zs = (el.style && el.style.zIndex) ? parseInt(el.style.zIndex, 10) : 0;
            const pos = (el.style && el.style.position) || '';
            const cls = el.className || '';
            const text = el.textContent || '';
            const looksLikeOverlay = (pos === 'fixed' && zs >= 9999) || /bg-slate-900\/90/.test(cls) || text.includes('Contenido disponible para alumnos');
            if (looksLikeOverlay) {
              el.remove();
            }
          });
        } catch (_) {}
      }
      
      // Funci√≥n para verificar autenticaci√≥n con seguridad
      function checkAuthentication() {
        console.log('üîç Verificando autenticaci√≥n para Formaci√≥n Semilla...');
        // Siempre limpiar posibles overlays antes de aplicar la UI
        removeGatingOverlays();
        
        // Para desarrollo: revisar si hay par√°metro ?dev=true para mostrar contenido
        const urlParams = new URLSearchParams(window.location.search);
        const devMode = urlParams.get('dev') === 'true';
        
        if (devMode) {
          console.log('üîß Modo desarrollador activado - mostrando contenido');
          authRequiredMessage.classList.add('hidden');
          mainContent.classList.remove('hidden');
          return;
        }
        
        // Verificar m√∫ltiples fuentes de autenticaci√≥n
        let isAuthenticated = false;
        
        // M√©todo 1: authManager (principal)
        if (typeof window.authManager !== 'undefined') {
          if (typeof window.authManager.isAuthenticated === 'boolean') {
            isAuthenticated = window.authManager.isAuthenticated;
          } else if (typeof window.authManager.isUserAuthenticated === 'function') {
            try {
              isAuthenticated = window.authManager.isUserAuthenticated();
            } catch(e) {
              console.log('Error verificando authManager:', e);
            }
          } else if (window.authManager.currentUser) {
            isAuthenticated = true;
          }
        }
        
        // M√©todo 2: Verificar localStorage (fallback para sesiones persistentes)
        if (!isAuthenticated) {
          const localUser = localStorage.getItem('deceroacien_user');
          const localSession = localStorage.getItem('deceroacien_session');
          const localToken = localStorage.getItem('deceroacien_token');
          
          if (localUser || localSession || localToken) {
            console.log('üì± Detectada sesi√≥n en localStorage');
            isAuthenticated = true;
          }
        }
        
        // M√©todo 3: Verificar si hay datos de usuario en cualquier formato
        if (!isAuthenticated) {
          // Verificar claves comunes de autenticaci√≥n
          const authKeys = ['sb-', 'supabase', 'auth', 'session', 'user'];
          for (let key of authKeys) {
            for (let i = 0; i < localStorage.length; i++) {
              const storageKey = localStorage.key(i);
              if (storageKey && storageKey.includes(key)) {
                const value = localStorage.getItem(storageKey);
                if (value && value !== 'null' && value !== '{}') {
                  console.log('üîë Detectada posible sesi√≥n en:', storageKey);
                  isAuthenticated = true;
                  break;
                }
              }
            }
            if (isAuthenticated) break;
          }
        }
        
        console.log('üîê Estado de autenticaci√≥n final:', isAuthenticated);
        
        if (isAuthenticated) {
          // Usuario registrado: Formaci√≥n Semilla es acceso gratuito
          console.log('‚úÖ Usuario autenticado - Formaci√≥n Semilla es contenido gratuito');
          
          // Otorgar acceso autom√°tico a Formaci√≥n Semilla para usuarios registrados
          if (window.entitlements && window.entitlements.grant) {
            window.entitlements.grant(['formacion.semilla']);
          }
          
          // Desactivar gating autom√°tico en esta p√°gina (Formaci√≥n Semilla es gratuito)
          if (window.applyPathAutoGuard) {
            window.applyPathAutoGuard = function() {
              console.log('üö´ Auto-guard desactivado para Formaci√≥n Semilla (contenido gratuito)');
            };
          }
          
          // Mostrar contenido y proteger de modificaciones posteriores
          authRequiredMessage.classList.add('hidden');
          mainContent.classList.remove('hidden');
          // Asegurar que no queden overlays
          removeGatingOverlays();
          
          // Prevenir que otros scripts modifiquen el contenido de Formaci√≥n Semilla
          setTimeout(function() {
            protectFormacionSemillaContent();
          }, 100);
        } else {
          // Usuario no registrado: mostrar mensaje de registro requerido
          console.log('‚ùå Usuario no autenticado - mostrando mensaje de registro');
          // Asegurar que no queden overlays que bloqueen el mensaje
          removeGatingOverlays();
          authRequiredMessage.classList.remove('hidden');
          mainContent.classList.add('hidden');
        }
      }
      
      // Funci√≥n para proteger el contenido de Formaci√≥n Semilla de modificaciones externas
      function protectFormacionSemillaContent() {
        const tallerCards = document.querySelectorAll('[href*="TALLER"]');
        tallerCards.forEach(card => {
          // Preservar el contenido original
          const originalHTML = card.innerHTML;
          
          // Crear un observer para detectar cambios
          const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
              if (mutation.type === 'childList' || mutation.type === 'characterData') {
                // Si el contenido ha sido modificado, restaurarlo
                if (card.innerHTML !== originalHTML) {
                  console.log('üõ°Ô∏è Protegiendo contenido de Formaci√≥n Semilla de modificaci√≥n externa');
                  card.innerHTML = originalHTML;
                }
              }
            });
          });
          
          // Observar cambios en el contenido
          observer.observe(card, {
            childList: true,
            subtree: true,
            characterData: true
          });
          
          // Agregar atributo para identificar que est√° protegido
          card.setAttribute('data-formacion-semilla-protected', 'true');
        });
        
        console.log('üõ°Ô∏è Contenido de Formaci√≥n Semilla protegido contra modificaciones');
      }
      
      // Iniciar verificaci√≥n inmediata
      checkAuthentication();
      
      // Verificaci√≥n adicional despu√©s de que otros scripts se carguen
      setTimeout(checkAuthentication, 500);
      setTimeout(checkAuthentication, 1500);
      
      // Escuchar eventos de autenticaci√≥n
      window.addEventListener('auth:success', function() {
        console.log('üéâ Evento de autenticaci√≥n detectado');
        checkAuthentication();
      });
      
      // Verificaci√≥n peri√≥dica para casos edge (solo por 10 segundos)
      let attempts = 0;
      const maxAttempts = 10;
      const authChecker = setInterval(function() {
        attempts++;
        // Cortar cuando ya se mostr√≥ el contenido
        if (attempts >= maxAttempts || !mainContent.classList.contains('hidden')) {
          clearInterval(authChecker);
          return;
        }
        checkAuthentication();
      }, 1000);
    });
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formaci√≥n Semilla | Cat√°logo de Talleres</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/styles/common.css">
  <link rel="stylesheet" href="../assets/styles/mobile.css">
  <link rel="stylesheet" href="../assets/styles/formacion-semilla.css">
</head>
<body class="antialiased bg-[#0a1f2f] text-[#e6f1ff]">
  <div class="sticky top-0 z-50 bg-[#0a192f]/80 backdrop-blur-lg border-b border-gray-800">
    <nav class="container mx-auto max-w-7xl px-6 py-3 flex justify-between items-center">
      <span class="text-lg font-bold highlight-text">Formaci√≥n Semilla</span>
      <span class="text-sm text-slate-300">Cat√°logo de talleres</span>
    </nav>
  </div>
  <main class="container mx-auto max-w-4xl px-6 py-12">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
      <!-- Tarjeta de bienvenida -->
      <aside class="doc-container p-6 rounded-lg">
        <h1 class="text-2xl font-black text-white mb-2">Bienvenido a Formaci√≥n Semilla</h1>
        <p class="text-sm highlight-text mb-4">Elige un taller para comenzar</p>
        <div class="space-y-6 text-gray-400 text-sm">
          <div>
            <h2 class="font-bold text-slate-300 text-base">üéØ Objetivo</h2>
            <p class="mt-1">Desarrollar habilidades emprendedoras con herramientas pr√°cticas y talleres guiados.</p>
          </div>
        </div>
      </aside>
      <!-- Listado de talleres -->
      <div class="tool-container p-6 rounded-lg flex flex-col justify-center items-center">
        <h2 class="text-xl font-bold text-white mb-6">Talleres disponibles</h2>
        <div class="w-full max-w-md space-y-6">
          <a href="TALLER 01 - FORMACI√ìN SEMILLA/taller-01.html" class="fs-btn fs-btn-primary block mb-2">Taller 01 ‚Äì De la Idea a la Acci√≥n</a>
          <a href="TALLER 02 - FORMACI√ìN SEMILLA/taller-02.html" class="fs-btn fs-btn-primary block mb-2">Taller 02 ‚Äì El Valor de tu Idea</a>
          <a href="TALLER 03 - FORMACI√ìN SEMILLA/taller-03.html" class="fs-btn fs-btn-primary block mb-2">Taller 03 ‚Äì Validaci√≥n y Prototipo</a>
          <a href="TALLER 04 - FORMACI√ìN SEMILLA/taller-04.html" class="fs-btn fs-btn-primary block mb-2">Taller 04 ‚Äì Estrategia Comercial</a>
          <a href="TALLER 05 - FORMACI√ìN SEMILLA/taller-05.html" class="fs-btn fs-btn-primary block mb-2">Taller 05 ‚Äì Finanzas B√°sicas</a>
        </div>
      </div>
    </div>
  </main>
  <footer class="footer-component"></footer>
  <script src="../assets/js/components.js"></script>
  <script src="../assets/js/auth.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      requireAuth();
    });
  </script>
</body>
</html>
