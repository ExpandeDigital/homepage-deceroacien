<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego: El Optimizador de Conversiones - DE CERO A CIEN</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --azul-noche: #1a1f3a;
            --dorado: #d4af37;
            --texto-claro: #e0e1e9;
            --verde-exito: #22c55e;
            --rojo-peligro: #ef4444;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--azul-noche);
            color: var(--texto-claro);
        }
        .font-serif { font-family: 'Playfair Display', serif; }
        .info-section .info-item { display: flex; align-items: flex-start; margin-bottom: 1.25rem; }
        .info-section .info-icon { flex-shrink: 0; width: 24px; height: 24px; margin-right: 12px; margin-top: 2px; font-size: 20px; }
        .option-card {
            background: linear-gradient(145deg, #2a3154, #1a1f3a);
            border: 1px solid rgba(212, 175, 55, 0.3);
            transition: all 0.2s ease-in-out;
            cursor: pointer;
        }
        .option-card:hover {
            transform: translateY(-4px);
            border-color: var(--dorado);
        }
        .option-card.disabled {
            opacity: 0.4;
            cursor: not-allowed;
            background: #1a1f3a;
        }
        .stat-value { transition: color 0.5s ease; }
    </style>
    <link rel="stylesheet" href="../assets/styles/common.css">
    <link rel="stylesheet" href="../assets/styles/mobile.css">
</head>
<body class="base-container antialiased bg-[var(--azul-noche)]">
    <header class="header-component"></header>
    <main class="main-content">
        <section class="main-section py-4">
            <div class="section-container">
                <a href="index.html" class="text-sm text-gray-400 hover:text-gray-200">‚Üê Volver a Gamificaci√≥n</a>
            </div>
        </section>
        <div class="flex items-center justify-center min-h-screen p-4">

    <!-- Pantalla de Informaci√≥n Inicial -->
    <div id="info-screen" class="w-full max-w-2xl mx-auto">
        <h1 class="font-serif text-3xl font-bold text-center text-white mb-6">El Optimizador de Conversiones</h1>
        <div class="bg-black/20 p-6 rounded-lg text-sm text-[var(--texto-claro)] border border-white/10">
            <p class="font-bold text-lg text-center text-white mb-6">Herramienta de la Fase 3: Tracci√≥n y P-M Fit</p>
            <div class="info-section space-y-4">
                <div class="info-item">
                    <span class="info-icon">üéØ</span>
                    <div>
                        <h3 class="font-bold text-white">Objetivo</h3>
                        <p class="text-gray-300">Tomar decisiones de mejora de producto y marketing basadas en datos, no en opiniones, comparando el rendimiento de dos versiones de un mismo elemento.</p>
                    </div>
                </div>
                <div class="info-item">
                     <span class="info-icon">‚≠ê</span>
                    <div>
                        <h3 class="font-bold text-white">Importancia</h3>
                        <p class="text-gray-300">Las pruebas A/B son el motor de la optimizaci√≥n continua. Te permiten mejorar de forma incremental y constante tus tasas de conversi√≥n, eliminando las conjeturas.</p>
                    </div>
                </div>
                 <div class="info-item">
                     <span class="info-icon">‚öôÔ∏è</span>
                    <div>
                        <h3 class="font-bold text-white">¬øQu√© es lo que hace?</h3>
                        <p class="text-gray-300">Este juego te presenta una p√°gina con una tasa de conversi√≥n base. Deber√°s elegir qu√© elemento probar (t√≠tulo, imagen, etc.) para intentar mejorarla. El juego simula el resultado del test A/B.</p>
                    </div>
                </div>
                 <div class="info-item">
                     <span class="info-icon">üí°</span>
                    <div>
                        <h3 class="font-bold text-white">¬øPara qu√© me sirve?</h3>
                        <p class="text-gray-300">Para entrenar tu intuici√≥n de optimizaci√≥n y entender que no todos los cambios generan un impacto positivo. Es la pr√°ctica ideal para la herramienta H5 (Fase 3): Motor de Pruebas A/B.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="text-center">
            <button id="start-game-btn" class="mt-8 bg-[var(--dorado)] text-[var(--azul-noche)] font-bold text-lg py-3 px-10 rounded-lg">
                ¬°Entendido, Empezar a Optimizar!
            </button>
        </div>
        </div>
    </main>
    <footer class="footer-component"></footer>

    <!-- Pantalla de Juego -->
    <div id="game-container" class="hidden w-full max-w-6xl mx-auto">
        <div class="text-center mb-6">
            <h1 class="font-serif text-4xl font-bold text-white">Optimizador de Conversiones</h1>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
            <!-- Columna Izquierda: Simulaci√≥n de Landing y M√©tricas -->
            <div>
                <div class="bg-black/20 p-4 rounded-lg border border-white/10">
                    <div class="text-center mb-4">
                        <p class="text-sm text-gray-400">Semana</p>
                        <p id="week-display" class="text-2xl font-bold">1 / 5</p>
                    </div>
                    <!-- Landing simulada -->
                    <div class="bg-white text-gray-800 p-6 rounded-lg text-center">
                        <h2 id="landing-headline" class="text-2xl font-bold text-[var(--azul-noche)]">Vende tus Cursos Online</h2>
                        <div class="my-4 h-32 bg-gray-200 rounded-md flex items-center justify-center">
                            <p id="landing-image-text" class="text-gray-500">Imagen Gen√©rica</p>
                        </div>
                        <button id="landing-cta" class="bg-blue-600 text-white font-bold py-2 px-6 rounded-lg">Empieza Gratis</button>
                    </div>
                    <div class="mt-4 text-center">
                        <p class="text-sm text-gray-400">Tasa de Conversi√≥n Actual</p>
                        <p id="conversion-rate-display" class="text-4xl font-black text-[var(--dorado)] stat-value">2.00%</p>
                    </div>
                </div>
            </div>

            <!-- Columna Derecha: Decisiones y Resultados -->
            <div>
                <h3 class="font-bold text-lg text-[var(--dorado)] mb-2">¬øQu√© quieres probar esta semana?</h3>
                <p class="text-sm text-gray-300 mb-4">Elige un experimento A/B. Cada prueba tiene un impacto potencial diferente.</p>
                <div id="options-area" class="space-y-3">
                    <!-- Opciones se generan aqu√≠ -->
                </div>
                 <div id="result-area" class="mt-4 bg-black/20 p-4 rounded-lg hidden">
                    <h4 class="font-bold text-lg text-white">Resultado del Experimento:</h4>
                    <p id="result-text" class="mt-2"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Fin de Juego -->
    <div id="game-over-modal" class="fixed inset-0 bg-black bg-opacity-70 hidden items-center justify-center p-4 z-50">
        <div class="bg-[var(--azul-noche)] border-2 border-[var(--dorado)] rounded-xl shadow-2xl w-full max-w-lg text-center p-8">
            <h2 id="game-over-title" class="font-serif text-4xl font-bold"></h2>
            <p id="game-over-final-rate" class="text-6xl font-black text-[var(--dorado)] my-4"></p>
            <p id="game-over-feedback" class="text-[var(--texto-claro)] mb-6"></p>
            <div class="flex gap-4 justify-center">
                <button id="info-back-btn" class="bg-gray-500 text-white font-bold text-lg py-3 px-8 rounded-lg">Ver Explicaci√≥n</button>
                <button id="play-again-btn" class="bg-[var(--dorado)] text-[var(--azul-noche)] font-bold text-lg py-3 px-8 rounded-lg">Jugar de Nuevo</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Elementos del DOM ---
            const infoScreen = document.getElementById('info-screen');
            const gameContainer = document.getElementById('game-container');
            const gameOverModal = document.getElementById('game-over-modal');
            const startGameBtn = document.getElementById('start-game-btn');
            const weekDisplay = document.getElementById('week-display');
            const conversionRateDisplay = document.getElementById('conversion-rate-display');
            const optionsArea = document.getElementById('options-area');
            const resultArea = document.getElementById('result-area');
            const resultText = document.getElementById('result-text');
            const gameOverTitle = document.getElementById('game-over-title');
            const gameOverFinalRate = document.getElementById('game-over-final-rate');
            const gameOverFeedback = document.getElementById('game-over-feedback');
            const playAgainBtn = document.getElementById('play-again-btn');
            const infoBackBtn = document.getElementById('info-back-btn');
            
            // --- Estado del Juego ---
            let state;
            
            const optionsPool = [
                { id: 'headline', text: 'Probar un nuevo T√≠tulo', impact: 0.8, description: 'Un t√≠tulo enfocado en beneficios puede tener un gran impacto.' },
                { id: 'image', text: 'Cambiar la Imagen Principal', impact: 0.5, description: 'Una imagen m√°s relevante puede mejorar la conexi√≥n emocional.' },
                { id: 'cta', text: 'Modificar el Bot√≥n de Acci√≥n', impact: 0.3, description: 'Cambiar el color o el texto del CTA puede generar m√°s clics.' },
                { id: 'testimonials', text: 'A√±adir Testimonios de Clientes', impact: 1.2, description: 'La prueba social es uno de los elementos m√°s persuasivos.' },
                { id: 'bad_idea', text: 'A√±adir m√∫sica de fondo', impact: -0.5, description: 'Algunas "mejoras" pueden en realidad perjudicar la experiencia.' },
                { id: 'guarantee', text: 'Incluir una garant√≠a de 30 d√≠as', impact: 0.6, description: 'Reducir el riesgo para el usuario suele aumentar la conversi√≥n.' }
            ];

            function showScreen(screen) {
                infoScreen.classList.add('hidden');
                gameContainer.classList.add('hidden');
                gameOverModal.classList.add('hidden');
                if (screen === 'info') infoScreen.classList.remove('hidden');
                if (screen === 'game') gameContainer.classList.remove('hidden');
                if (screen === 'game-over') gameOverModal.classList.remove('hidden');
            }

            function initGame() {
                state = {
                    week: 1,
                    conversionRate: 2.00,
                    usedOptions: new Set()
                };
                updateDisplay();
                generateOptions();
                resultArea.classList.add('hidden');
                showScreen('game');
            }
            
            function updateDisplay() {
                weekDisplay.textContent = `${state.week} / 5`;
                conversionRateDisplay.textContent = `${state.conversionRate.toFixed(2)}%`;
            }

            function generateOptions() {
                optionsArea.innerHTML = '';
                const availableOptions = optionsPool.filter(opt => !state.usedOptions.has(opt.id));
                
                availableOptions.forEach(option => {
                    const card = document.createElement('div');
                    card.className = 'option-card p-4 rounded-lg';
                    card.innerHTML = `<p class="font-bold text-white">${option.text}</p><p class="text-xs text-gray-400 mt-1">${option.description}</p>`;
                    card.onclick = () => runExperiment(option);
                    optionsArea.appendChild(card);
                });
            }

            function runExperiment(option) {
                state.usedOptions.add(option.id);
                document.querySelectorAll('.option-card').forEach(c => c.classList.add('disabled'));

                const oldRate = state.conversionRate;
                const change = (Math.random() * option.impact) - (option.impact / 4); // A√±ade aleatoriedad
                state.conversionRate += change;
                if (state.conversionRate < 0.1) state.conversionRate = 0.1; // M√≠nimo
                
                let resultMessage = '';
                if (state.conversionRate > oldRate) {
                    resultMessage = `<span class="font-bold text-[var(--verde-exito)]">¬°Prueba Exitosa!</span> La conversi√≥n aument√≥ en <span class="font-bold">${(state.conversionRate - oldRate).toFixed(2)}%</span>.`;
                } else {
                    resultMessage = `<span class="font-bold text-[var(--rojo-peligro)]">Prueba Fallida.</span> La conversi√≥n disminuy√≥ en <span class="font-bold">${(oldRate - state.conversionRate).toFixed(2)}%</span>.`;
                }

                resultText.innerHTML = resultMessage;
                resultArea.classList.remove('hidden');
                
                animateValue(conversionRateDisplay, oldRate, state.conversionRate);
                
                setTimeout(() => {
                    state.week++;
                    if (state.week > 5) {
                        endGame();
                    } else {
                        updateDisplay();
                        generateOptions();
                        resultArea.classList.add('hidden');
                    }
                }, 3000);
            }

            function endGame() {
                gameOverFinalRate.textContent = `${state.conversionRate.toFixed(2)}%`;
                let feedback = '';
                if (state.conversionRate > 7) {
                    gameOverTitle.textContent = '¬°Resultado Maestro!';
                    gameOverTitle.style.color = 'var(--verde-exito)';
                    feedback = '¬°Incre√≠ble! Tus decisiones han llevado la p√°gina a un rendimiento excepcional. Eres un verdadero optimizador.';
                } else if (state.conversionRate > 3) {
                     gameOverTitle.textContent = '¬°Buen Progreso!';
                     gameOverTitle.style.color = 'var(--dorado)';
                    feedback = 'Lograste una mejora notable. Has demostrado una buena intuici√≥n para la optimizaci√≥n. ¬°Sigue as√≠!';
                } else {
                     gameOverTitle.textContent = 'Necesita Mejorar';
                     gameOverTitle.style.color = 'var(--rojo-peligro)';
                    feedback = 'La optimizaci√≥n es dif√≠cil. No todos los cambios funcionan. Analiza los resultados y vuelve a intentarlo. ¬°Cada test es un aprendizaje!';
                }
                gameOverFeedback.textContent = feedback;
                showScreen('game-over');
            }
            
            function animateValue(element, start, end) {
                let startTimestamp = null;
                const duration = 1000;
                const step = (timestamp) => {
                    if (!startTimestamp) startTimestamp = timestamp;
                    const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                    const currentValue = progress * (end - start) + start;
                    element.textContent = `${currentValue.toFixed(2)}%`;
                    if (progress < 1) {
                        window.requestAnimationFrame(step);
                    }
                };
                window.requestAnimationFrame(step);
            }

            startGameBtn.addEventListener('click', initGame);
            playAgainBtn.addEventListener('click', initGame);
            infoBackBtn.addEventListener('click', () => showScreen('info'));
        });
    </script>
    <script src="../assets/js/components.js"></script>
</body>
</html>
