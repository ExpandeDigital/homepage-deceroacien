<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego: El Desaf√≠o del Burn Rate - DE CERO A CIEN</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --azul-noche: #1a1f3a;
            --dorado: #d4af37;
            --texto-claro: #e0e1e9;
            --rojo-peligro: #ef4444;
            --verde-exito: #22c55e;
        }
        body { font-family: 'Inter', sans-serif; background-color: var(--azul-noche); color: var(--texto-claro); }
        .font-serif { font-family: 'Playfair+Display', serif; }
        .game-card { background: linear-gradient(145deg, #2a3154, #1a1f3a); border: 1px solid rgba(212, 175, 55, 0.2); transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease; }
        .game-card:hover { transform: translateY(-5px); border-color: var(--dorado); }
        .stat-card { background-color: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.1); }
        .value-change { animation: pulse-bg 0.7s ease-out; }
        @keyframes pulse-bg { 0% { background-color: rgba(212, 175, 55, 0.5); transform: scale(1.05); } 100% { background-color: transparent; transform: scale(1); } }
        .info-section .info-item { display: flex; align-items: flex-start; margin-bottom: 1.25rem; }
        .info-section .info-icon { flex-shrink: 0; width: 24px; height: 24px; margin-right: 12px; margin-top: 2px; }
    </style>
    <link rel="stylesheet" href="../assets/styles/common.css">
    <link rel="stylesheet" href="../assets/styles/mobile.css">
</head>
<body class="base-container antialiased bg-[var(--azul-noche)]">
    <header class="header-component"></header>
    <main class="main-content">
        <section class="main-section py-4">
            <div class="section-container">
                <a href="index.html" class="text-sm text-gray-400 hover:text-gray-200">‚Üê Volver a Gamificaci√≥n</a>
            </div>
        </section>
        <div class="flex items-center justify-center min-h-screen p-4">

    <!-- Pantalla de Informaci√≥n Inicial -->
    <div id="info-screen" class="w-full max-w-2xl mx-auto">
        <h1 class="font-serif text-3xl font-bold text-center text-white mb-6">El Desaf√≠o del Burn Rate</h1>
        <div class="bg-black/20 p-6 rounded-lg text-sm text-[var(--texto-claro)] border border-white/10">
            <p class="font-bold text-lg text-center text-white mb-6">Herramienta de la Fase 4: Crecimiento y Escalabilidad</p>
            
            <div class="info-section space-y-4">
                <div class="info-item">
                    <span class="info-icon">üéØ</span>
                    <div>
                        <h3 class="font-bold text-white">Objetivo</h3>
                        <p class="text-gray-300">Experimentar la presi√≥n de tomar decisiones de inversi√≥n y gasto para aprender a proyectar el futuro financiero de tu negocio, viendo el impacto directo de cada acci√≥n en tu capital.</p>
                    </div>
                </div>
                <div class="info-item">
                     <span class="info-icon">‚≠ê</span>
                    <div>
                        <h3 class="font-bold text-white">Importancia</h3>
                        <p class="text-gray-300">Un emprendedor que no domina su flujo de caja est√° navegando a ciegas. Esta habilidad es crucial para la supervivencia, para saber cu√°ndo acelerar, cu√°ndo ser cauto y cu√°ndo buscar inversi√≥n.</p>
                    </div>
                </div>
                 <div class="info-item">
                     <span class="info-icon">‚öôÔ∏è</span>
                    <div>
                        <h3 class="font-bold text-white">¬øQu√© es lo que hace?</h3>
                        <p class="text-gray-300">Este juego te pone al mando de una startup con capital limitado. Cada mes, eliges entre 3 decisiones estrat√©gicas que afectan tus ingresos y gastos. El sistema calcula autom√°ticamente tu nuevo estado financiero.</p>
                    </div>
                </div>
                 <div class="info-item">
                     <span class="info-icon">üí°</span>
                    <div>
                        <h3 class="font-bold text-white">¬øPara qu√© me sirve?</h3>
                        <p class="text-gray-300">Sirve para transformar la ansiedad financiera en control estrat√©gico. Te permite simular escenarios y entender las consecuencias de tus decisiones antes de que cuesten dinero real, prepar√°ndote para usar la herramienta real del Camino Dorado.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="text-center">
            <button id="start-game-btn" class="mt-8 bg-[var(--dorado)] text-[var(--azul-noche)] font-bold text-lg py-3 px-10 rounded-lg">
                ¬°Entendido, Empezar a Jugar!
            </button>
        </div>
        </div>
    </main>
    <footer class="footer-component"></footer>

    <div id="game-container" class="w-full max-w-4xl mx-auto">
        <!-- Dashboard de M√©tricas -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
            <div class="stat-card p-4 rounded-lg text-center">
                <p class="text-sm text-gray-400">Capital Restante</p>
                <p id="capital-display" class="text-2xl font-bold text-white transition-colors duration-500">$100,000</p>
            </div>
            <div class="stat-card p-4 rounded-lg text-center">
                <p class="text-sm text-gray-400">Ingresos / Mes</p>
                <p id="revenue-display" class="text-2xl font-bold text-[var(--verde-exito)]">$5,000</p>
            </div>
            <div class="stat-card p-4 rounded-lg text-center">
                <p class="text-sm text-gray-400">Gastos / Mes (Burn Rate)</p>
                <p id="expenses-display" class="text-2xl font-bold text-[var(--rojo-peligro)]">$15,000</p>
            </div>
            <div class="stat-card p-4 rounded-lg text-center">
                <p class="text-sm text-gray-400">Mes Actual</p>
                <p id="month-display" class="text-2xl font-bold text-white">1</p>
            </div>
        </div>

        <!-- √Årea de Decisiones y Log -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div id="decision-area" class="md:col-span-2 space-y-4">
                <!-- Las decisiones se cargar√°n aqu√≠ -->
            </div>
            <div id="log-area" class="bg-black/20 p-4 rounded-lg h-64 overflow-y-auto text-sm">
                <p class="font-semibold mb-2 text-[var(--dorado)]">Registro de Actividad:</p>
                <div id="log-messages"></div>
            </div>
        </div>
        
        <div class="mt-8 text-center">
            <button id="next-month-btn" class="bg-[var(--dorado)] text-[var(--azul-noche)] font-bold text-lg py-3 px-10 rounded-lg shadow-lg hover:bg-opacity-90 transition-colors w-full md:w-auto">
                Avanzar al Siguiente Mes
            </button>
        </div>
    </div>
    
    <!-- Pantalla de Fin de Juego -->
    <div id="game-over-screen" class="hidden text-center">
        <h2 id="game-over-title" class="font-serif text-5xl font-bold"></h2>
        <p id="game-over-message" class="text-xl mt-4 max-w-lg mx-auto"></p>
        <div class="mt-8 flex gap-4 justify-center">
             <button id="info-back-btn" class="bg-gray-500 text-white font-bold text-lg py-3 px-10 rounded-lg">
                Ver Explicaci√≥n
            </button>
            <button id="play-again-btn" class="bg-[var(--dorado)] text-[var(--azul-noche)] font-bold text-lg py-3 px-10 rounded-lg">
                Jugar de Nuevo
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const infoScreen = document.getElementById('info-screen');
            const gameContainer = document.getElementById('game-container');
            const gameOverScreen = document.getElementById('game-over-screen');
            const capitalDisplay = document.getElementById('capital-display');
            const revenueDisplay = document.getElementById('revenue-display');
            const expensesDisplay = document.getElementById('expenses-display');
            const monthDisplay = document.getElementById('month-display');
            const decisionArea = document.getElementById('decision-area');
            const logMessages = document.getElementById('log-messages');
            const nextMonthBtn = document.getElementById('next-month-btn');
            const playAgainBtn = document.getElementById('play-again-btn');
            const startGameBtn = document.getElementById('start-game-btn');
            const infoBackBtn = document.getElementById('info-back-btn');

            let state = {};

            const decisionsPool = [
                { id: 'marketing-a', text: 'Lanzar campa√±a de marketing agresiva', cost: 15000, revenueIncrease: 8000, expenseIncrease: 2000, description: 'Invierte fuerte en anuncios. Alto riesgo, alta recompensa potencial.' },
                { id: 'marketing-b', text: 'Optimizar SEO y contenidos', cost: 5000, revenueIncrease: 3000, expenseIncrease: 500, description: 'Crecimiento lento pero sostenible. Mejora la base a largo plazo.' },
                { id: 'hiring-a', text: 'Contratar 2 desarrolladores senior', cost: 0, revenueIncrease: 0, expenseIncrease: 18000, description: 'Acelera el desarrollo del producto, pero dispara los gastos fijos.' },
                { id: 'hiring-b', text: 'Contratar 1 desarrollador junior', cost: 0, revenueIncrease: 0, expenseIncrease: 4000, description: 'Apoyo al equipo t√©cnico con un impacto menor en el burn rate.' },
                { id: 'ops-a', text: 'Mover a oficinas m√°s grandes', cost: 10000, revenueIncrease: 0, expenseIncrease: 5000, description: 'Mejora la moral y el espacio, pero aumenta los costos fijos.' },
                { id: 'ops-b', text: 'Optimizar software y reducir costos', cost: 2000, revenueIncrease: 0, expenseIncrease: -1500, description: 'Un peque√±o gasto para encontrar ahorros mensuales recurrentes.' },
                { id: 'product-a', text: 'Desarrollar nueva funcionalidad premium', cost: 20000, revenueIncrease: 10000, expenseIncrease: 1000, description: 'Una gran inversi√≥n que puede atraer clientes de alto valor.'}
            ];

            function showScreen(screen) {
                // Mantener visibles instrucciones + juego; alternar solo fin de juego
                infoScreen.classList.remove('hidden');
                gameContainer.classList.remove('hidden');
                gameOverScreen.classList.add('hidden');
                if (screen === gameOverScreen) gameOverScreen.classList.remove('hidden');
            }

            function initGame() {
                state = { capital: 100000, revenue: 5000, expenses: 15000, month: 1, gameOver: false, decisionsMadeThisMonth: new Set() };
                logMessages.innerHTML = '';
                addLog('¬°Inicia tu startup! Tienes $100,000 para empezar.');
                updateDisplay();
                generateDecisions();
                showScreen(gameContainer);
            }

            function formatCurrency(value) { return `$${Math.round(value).toLocaleString('es-CL')}`; }
            function animateValue(element) { element.classList.remove('value-change'); void element.offsetWidth; element.classList.add('value-change'); }

            function updateDisplay() {
                capitalDisplay.textContent = formatCurrency(state.capital);
                revenueDisplay.textContent = formatCurrency(state.revenue);
                expensesDisplay.textContent = formatCurrency(state.expenses);
                monthDisplay.textContent = state.month;
                ['capital', 'revenue', 'expenses', 'month'].forEach(id => animateValue(document.getElementById(`${id}-display`)));
                capitalDisplay.classList.toggle('text-[var(--rojo-peligro)]', state.capital < 20000);
            }

            function addLog(message) { logMessages.innerHTML = `<p>${message}</p>` + logMessages.innerHTML; }

            function generateDecisions() {
                decisionArea.innerHTML = '<h3 class="font-serif text-xl font-bold text-white mb-2">Decisiones del Mes:</h3>';
                state.decisionsMadeThisMonth.clear();
                const availableDecisions = decisionsPool.filter(d => Math.random() > 0.4).slice(0, 3);
                if (availableDecisions.length === 0) { decisionArea.innerHTML += '<p class="text-gray-400">Este mes ha sido tranquilo. Prep√°rate para el siguiente.</p>'; }
                availableDecisions.forEach(decision => {
                    const card = document.createElement('div');
                    card.className = 'game-card p-4 rounded-lg cursor-pointer';
                    card.innerHTML = `
                        <p class="font-bold text-white">${decision.text}</p>
                        <p class="text-xs text-gray-400 mt-1">${decision.description}</p>
                        <div class="text-xs mt-2 font-semibold">
                            ${decision.cost > 0 ? `<span class="text-[var(--rojo-peligro)]">Costo: ${formatCurrency(decision.cost)}</span>` : ''}
                            ${decision.revenueIncrease > 0 ? `<span class="text-[var(--verde-exito)] ml-2">Ingresos +${formatCurrency(decision.revenueIncrease)}</span>` : ''}
                            ${decision.expenseIncrease !== 0 ? `<span class="text-[var(--rojo-peligro)] ml-2">Gastos ${decision.expenseIncrease > 0 ? '+' : ''}${formatCurrency(decision.expenseIncrease)}</span>` : ''}
                        </div>
                    `;
                    card.onclick = () => makeDecision(decision, card);
                    decisionArea.appendChild(card);
                });
            }

            function makeDecision(decision, cardElement) {
                if (state.decisionsMadeThisMonth.has(decision.id)) { addLog('Ya has tomado una decisi√≥n similar este mes.'); return; }
                if (state.capital < decision.cost) { addLog('¬°No tienes suficiente capital para esta decisi√≥n!'); return; }
                state.capital -= decision.cost; state.revenue += decision.revenueIncrease; state.expenses += decision.expenseIncrease; state.decisionsMadeThisMonth.add(decision.id);
                addLog(`Decisi√≥n tomada: ${decision.text}.`);
                cardElement.style.borderColor = 'var(--dorado)'; cardElement.style.opacity = '0.5'; cardElement.onclick = null;
                updateDisplay();
            }

            function advanceMonth() {
                const netFlow = state.revenue - state.expenses;
                state.capital += netFlow;
                state.month++;
                addLog(`Fin del Mes ${state.month - 1}: Flujo de caja de ${formatCurrency(netFlow)}.`);
                updateDisplay();
                if (state.capital <= 0) endGame(false);
                else if (state.revenue > state.expenses) endGame(true);
                else generateDecisions();
            }

            function endGame(isWin) {
                state.gameOver = true; showScreen(gameOverScreen);
                const gameOverTitle = document.getElementById('game-over-title');
                const gameOverMessage = document.getElementById('game-over-message');
                if (isWin) {
                    gameOverTitle.textContent = '¬°Rentabilidad Alcanzada!';
                    gameOverTitle.className = 'font-serif text-5xl font-bold text-[var(--verde-exito)]';
                    gameOverMessage.textContent = `¬°Felicitaciones! Alcanzaste un flujo de caja positivo en el mes ${state.month}. Has construido un negocio sostenible.`;
                } else {
                    gameOverTitle.textContent = '¬°Bancarrota!';
                    gameOverTitle.className = 'font-serif text-5xl font-bold text-[var(--rojo-peligro)]';
                    gameOverMessage.textContent = `Te quedaste sin capital en el mes ${state.month}. Cada fracaso es una lecci√≥n. ¬°Int√©ntalo de nuevo!`;
                }
            }
            
            if (startGameBtn) startGameBtn.textContent = 'Reiniciar';
            startGameBtn.addEventListener('click', initGame);
            nextMonthBtn.addEventListener('click', advanceMonth);
            playAgainBtn.addEventListener('click', initGame);
            infoBackBtn.addEventListener('click', () => showScreen(infoScreen));
            // Autoiniciar
            initGame();
        });
    </script>
    <script src="../assets/js/components.js"></script>
</body>
</html>
