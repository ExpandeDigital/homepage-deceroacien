<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Viabilidad Inicial | El Camino Dorado</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a1f2f;
            color: #e6f1ff;
        }
        .highlight-text { color: #FBBF24; }
        .tool-container { background-color: #112240; }
        .doc-container { background-color: #0a1f2f; }
        .action-button {
            background-color: #1E293B;
            color: #cbd5e1;
            padding: 8px 16px;
            border-radius: 6px;
            transition: all 0.3s ease;
            font-size: 0.875rem;
            font-weight: 600;
            border: 1px solid #334155;
            cursor: pointer;
        }
        .action-button:hover {
            background-color: #334155;
            color: #FBBF24;
        }
        .form-input {
            background-color: #0a1f2f;
            border: 1px solid #1e2d4d;
            color: #cbd5e1;
            width: 100%;
            padding: 10px;
            border-radius: 4px;
        }
        .form-input:focus {
            outline: none;
            border-color: #FBBF24;
        }
        .result-card {
            background-color: #0a1f2f;
            border: 1px solid #1e2d4d;
            padding: 16px;
            border-radius: 8px;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Subheader local (contenedor neutro) -->
    <div class="sticky top-0 z-50 bg-[#0a192f]/80 backdrop-blur-lg border-b border-gray-800">
        <nav class="container mx-auto max-w-7xl px-6 py-3 flex justify-between items-center">
            <a href="../portal-alumno.html" class="text-lg font-bold highlight-text">← Volver al Centro de Formación</a>
            <span class="text-sm text-slate-300">Bienvenido, [Nombre Alumno]</span>
        </nav>
    </div>

    <main class="container mx-auto max-w-7xl px-6 py-12">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

            <!-- Columna Izquierda: Documento Pedagógico -->
            <aside class="lg:col-span-1 doc-container p-6 rounded-lg">
                <h1 class="text-2xl font-black text-white">Calculadora de Viabilidad Inicial</h1>
                <p class="text-sm highlight-text mt-1">Herramienta de la Fase 1: Ideación y Validación</p>

                <div class="mt-8 space-y-6 text-gray-400 text-sm">
                    <div>
                        <h2 class="font-bold text-slate-300 text-base">üéØ Objetivo de la Tarea</h2>
                        <p class="mt-1">Obtener una primera estimación de la rentabilidad potencial de tu idea de negocio, calculando los ingresos, costes y el punto de equilibrio con unas pocas variables clave.</p>
                    </div>
                    <div>
                        <h2 class="font-bold text-slate-300 text-base">‚≠ê Importancia</h2>
                        <p class="mt-1">Una gran idea no siempre es un gran negocio. Esta herramienta te obliga a "ponerle números" a tu visión desde el primer día. Te ayuda a entender si tu modelo de precios es sostenible y cuántos clientes necesitas para que el negocio sea rentable, evitando errores costosos en el futuro.</p>
                    </div>
                    <div>
                        <h2 class="font-bold text-slate-300 text-base">‚öôÔ∏è ¿Qué es lo que hace?</h2>
                        <p class="mt-1">Calcula en tiempo real tus ingresos, costes y beneficio mensual a partir de los datos que introduces. Lo más importante es que te muestra tu **Punto de Equilibrio**: el número mínimo de clientes que necesitas al mes para cubrir todos tus gastos.</p>
                    </div>
                    <div>
                        <h2 class="font-bold text-slate-300 text-base">üí° ¿Para qué me sirve?</h2>
                        <p class="mt-1">Para tomar decisiones informadas. ¿Debes subir el precio? ¿Necesitas reducir tus costes fijos? ¿Es realista conseguir el número de clientes que necesitas para ser rentable? Esta calculadora te da las respuestas numéricas para validar o pivotar tu estrategia.</p>
                    </div>
                </div>
            </aside>

            <!-- Columna Derecha: Herramienta Interactiva -->
            <div class="lg:col-span-2 tool-container p-6 rounded-lg">
                <div class="flex items-center justify-between pb-4 border-b border-gray-700">
                    <h2 class="text-xl font-bold text-white">Analiza la Rentabilidad de tu Idea</h2>
                     <div class="flex space-x-3">
                        <button class="action-button" onclick="guardar()">üíæ Guardar</button>
                        <button class="action-button" onclick="descargar()">üìÑ Descargar</button>
                        <button class="action-button" onclick="compartir()">üîó Compartir</button>
                    </div>
                </div>

                <!-- Calculadora -->
                <div id="calculator" class="mt-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Columna de Entradas -->
                        <div class="space-y-6">
                            <div>
                                <label for="precioVenta" class="text-sm font-semibold text-slate-300">Precio de Venta</label>
                                <p class="text-xs text-gray-400 mb-2">¿Cuánto pagará un cliente por tu producto/servicio al mes?</p>
                                <input type="number" id="precioVenta" class="form-input" placeholder="Ej: 25">
                            </div>
                            <div>
                                <label for="costoVariable" class="text-sm font-semibold text-slate-300">Coste Variable por Cliente</label>
                                <p class="text-xs text-gray-400 mb-2">Costes que dependen directamente de cada venta (comisiones, material, etc.).</p>
                                <input type="number" id="costoVariable" class="form-input" placeholder="Ej: 5">
                            </div>
                            <div>
                                <label for="costosFijos" class="text-sm font-semibold text-slate-300">Costes Fijos Mensuales</label>
                                <p class="text-xs text-gray-400 mb-2">Gastos que tienes cada mes, vendas o no (sueldos, software, alquiler).</p>
                                <input type="number" id="costosFijos" class="form-input" placeholder="Ej: 2000">
                            </div>
                             <div>
                                <label for="clientesMes" class="text-sm font-semibold text-slate-300">Estimación de Clientes al Mes</label>
                                <p class="text-xs text-gray-400 mb-2">¿Cuántos clientes crees que puedes conseguir en un mes?</p>
                                <input type="number" id="clientesMes" class="form-input" placeholder="Ej: 100">
                            </div>
                        </div>

                        <!-- Columna de Resultados -->
                        <div class="space-y-4">
                            <div class="result-card">
                                <p class="text-sm text-gray-400">Ingresos Totales Mensuales</p>
                                <p id="ingresos" class="text-3xl font-black text-white">--</p>
                            </div>
                            <div class="result-card">
                                <p class="text-sm text-gray-400">Costes Totales Mensuales</p>
                                <p id="costos" class="text-3xl font-black text-white">--</p>
                            </div>
                            <div class="result-card">
                                <p class="text-sm text-gray-400">Beneficio / Pérdida Mensual</p>
                                <p id="beneficio" class="text-3xl font-black text-white">--</p>
                            </div>
                             <div class="result-card border-2 border-[#FBBF24]">
                                <p class="text-sm font-semibold highlight-text">Punto de Equilibrio</p>
                                <p class="text-gray-300 text-xs">Clientes que necesitas al mes para cubrir costes</p>
                                <p id="puntoEquilibrio" class="text-3xl font-black text-white mt-2">--</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        const inputs = {
            precioVenta: document.getElementById('precioVenta'),
            costoVariable: document.getElementById('costoVariable'),
            costosFijos: document.getElementById('costosFijos'),
            clientesMes: document.getElementById('clientesMes'),
        };

        const outputs = {
            ingresos: document.getElementById('ingresos'),
            costos: document.getElementById('costos'),
            beneficio: document.getElementById('beneficio'),
            puntoEquilibrio: document.getElementById('puntoEquilibrio'),
        };

        function formatCurrency(value) {
            if (isNaN(value) || !isFinite(value)) {
                return '$ 0';
            }
            return `$ ${Math.round(value).toLocaleString('es-ES')}`;
        }

        function calculateViability() {
            const precioVenta = parseFloat(inputs.precioVenta.value) || 0;
            const costoVariable = parseFloat(inputs.costoVariable.value) || 0;
            const costosFijos = parseFloat(inputs.costosFijos.value) || 0;
            const clientesMes = parseFloat(inputs.clientesMes.value) || 0;

            const ingresosMensuales = precioVenta * clientesMes;
            const costosVariablesTotales = costoVariable * clientesMes;
            const costosTotales = costosFijos + costosVariablesTotales;
            const beneficioMensual = ingresosMensuales - costosTotales;

            const margenContribucion = precioVenta - costoVariable;
            let puntoEquilibrioClientes = '--';
            if (margenContribucion > 0) {
                puntoEquilibrioClientes = Math.ceil(costosFijos / margenContribucion);
            }

            outputs.ingresos.textContent = formatCurrency(ingresosMensuales);
            outputs.costos.textContent = formatCurrency(costosTotales);
            outputs.beneficio.textContent = formatCurrency(beneficioMensual);

            if (beneficioMensual >= 0) {
                outputs.beneficio.classList.remove('text-red-500');
                outputs.beneficio.classList.add('text-green-500');
            } else {
                outputs.beneficio.classList.remove('text-green-500');
                outputs.beneficio.classList.add('text-red-500');
            }

            outputs.puntoEquilibrio.textContent = isNaN(puntoEquilibrioClientes) ? '--' : `${puntoEquilibrioClientes} clientes`;
        }

        Object.values(inputs).forEach(input => {
            input.addEventListener('input', calculateViability);
        });

        // Initial calculation on page load
        calculateViability();

        // Placeholder functions for actions
        function guardar() {
            alert('Funcionalidad "Guardar": ¡Próximamente!');
        }
        function descargar() {
            alert('Funcionalidad "Descargar": ¡Próximamente!');
        }
        function compartir() {
            alert('Funcionalidad "Compartir": ¡Próximamente!');
        }
    </script>
    <script src="../assets/js/components.js"></script>
</body>
</html>
